{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport Axios from \"axios\";\nimport { port, REACT_APP_GATEWAY_URL } from \"./apiKey\";\nimport * as SecureStore from \"expo-secure-store\";\n\nvar axiosConfiguration = function axiosConfiguration(apiName) {\n  var axiosConfig = {\n    baseURL: \"http://\" + REACT_APP_GATEWAY_URL + \":\" + port + \"/\" + apiName\n  };\n  var axios = Axios.create(axiosConfig);\n\n  var requestHandler = function _callee(request) {\n    var userToken;\n    return _regeneratorRuntime.async(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regeneratorRuntime.awrap(SecureStore.getItemAsync(\"token\"));\n\n          case 2:\n            userToken = _context.sent;\n            if (!!userToken) request.headers.Authorization = \"\" + userToken;\n            console.log(\"TOKEN-----\", userToken);\n            return _context.abrupt(\"return\", request);\n\n          case 6:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var onResponseError = function _callee2(error) {\n    return _regeneratorRuntime.async(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            console.log(\"\" + JSON.stringify(error));\n            return _context2.abrupt(\"return\", Promise.reject(error));\n\n          case 2:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  axios.interceptors.request.use(function (request) {\n    return requestHandler(request);\n  }, function (error) {\n    return Promise.reject(error);\n  });\n  axios.interceptors.response.use(function (response) {\n    return response;\n  }, function (error) {\n    return onResponseError(error);\n  });\n  return axios;\n};\n\nexport default axiosConfiguration;","map":{"version":3,"names":["Axios","port","REACT_APP_GATEWAY_URL","SecureStore","axiosConfiguration","apiName","axiosConfig","baseURL","axios","create","requestHandler","request","getItemAsync","userToken","headers","Authorization","console","log","onResponseError","error","JSON","stringify","Promise","reject","interceptors","use","response"],"sources":["C:/Users/Ahmed/Desktop/Projects/UniChat/Mobile/api/axiosConfiguration.js"],"sourcesContent":["import Axios from \"axios\";\r\nimport { port, REACT_APP_GATEWAY_URL } from \"./apiKey\";\r\nimport * as SecureStore from \"expo-secure-store\";\r\n\r\nconst axiosConfiguration = (apiName) => {\r\n  const axiosConfig = {\r\n    baseURL: `http://${REACT_APP_GATEWAY_URL}:${port}/${apiName}`,\r\n  };\r\n\r\n  const axios = Axios.create(axiosConfig);\r\n\r\n  const requestHandler = async (request) => {\r\n    const userToken = await SecureStore.getItemAsync(\"token\");\r\n    // alert(userToken);\r\n    if (!!userToken) request.headers.Authorization = `${userToken}`;\r\n\r\n    console.log(\"TOKEN-----\", userToken);\r\n    return request;\r\n  };\r\n\r\n  const onResponseError = async (error) => {\r\n    console.log(`${JSON.stringify(error)}`);\r\n    return Promise.reject(error);\r\n  };\r\n\r\n  axios.interceptors.request.use(\r\n    (request) => requestHandler(request),\r\n    (error) => Promise.reject(error)\r\n  );\r\n\r\n  axios.interceptors.response.use(\r\n    (response) => response,\r\n    (error) => onResponseError(error)\r\n  );\r\n\r\n  return axios;\r\n};\r\n\r\nexport default axiosConfiguration;\r\n"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,IAAT,EAAeC,qBAAf;AACA,OAAO,KAAKC,WAAZ,MAA6B,mBAA7B;;AAEA,IAAMC,kBAAkB,GAAG,SAArBA,kBAAqB,CAACC,OAAD,EAAa;EACtC,IAAMC,WAAW,GAAG;IAClBC,OAAO,cAAYL,qBAAZ,SAAqCD,IAArC,SAA6CI;EADlC,CAApB;EAIA,IAAMG,KAAK,GAAGR,KAAK,CAACS,MAAN,CAAaH,WAAb,CAAd;;EAEA,IAAMI,cAAc,GAAG,iBAAOC,OAAP;IAAA;IAAA;MAAA;QAAA;UAAA;YAAA;YAAA,iCACGR,WAAW,CAACS,YAAZ,CAAyB,OAAzB,CADH;;UAAA;YACfC,SADe;YAGrB,IAAI,CAAC,CAACA,SAAN,EAAiBF,OAAO,CAACG,OAAR,CAAgBC,aAAhB,QAAmCF,SAAnC;YAEjBG,OAAO,CAACC,GAAR,CAAY,YAAZ,EAA0BJ,SAA1B;YALqB,iCAMdF,OANc;;UAAA;UAAA;YAAA;QAAA;MAAA;IAAA;EAAA,CAAvB;;EASA,IAAMO,eAAe,GAAG,kBAAOC,KAAP;IAAA;MAAA;QAAA;UAAA;YACtBH,OAAO,CAACC,GAAR,MAAeG,IAAI,CAACC,SAAL,CAAeF,KAAf,CAAf;YADsB,kCAEfG,OAAO,CAACC,MAAR,CAAeJ,KAAf,CAFe;;UAAA;UAAA;YAAA;QAAA;MAAA;IAAA;EAAA,CAAxB;;EAKAX,KAAK,CAACgB,YAAN,CAAmBb,OAAnB,CAA2Bc,GAA3B,CACE,UAACd,OAAD;IAAA,OAAaD,cAAc,CAACC,OAAD,CAA3B;EAAA,CADF,EAEE,UAACQ,KAAD;IAAA,OAAWG,OAAO,CAACC,MAAR,CAAeJ,KAAf,CAAX;EAAA,CAFF;EAKAX,KAAK,CAACgB,YAAN,CAAmBE,QAAnB,CAA4BD,GAA5B,CACE,UAACC,QAAD;IAAA,OAAcA,QAAd;EAAA,CADF,EAEE,UAACP,KAAD;IAAA,OAAWD,eAAe,CAACC,KAAD,CAA1B;EAAA,CAFF;EAKA,OAAOX,KAAP;AACD,CAhCD;;AAkCA,eAAeJ,kBAAf"},"metadata":{},"sourceType":"module"}